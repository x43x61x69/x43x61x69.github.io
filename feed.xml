<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title></title>
        <description></description>
        <link>https://one.vg/</link>
        <atom:link href="https://one.vg/feed.xml" rel="self" type="application/rss+xml"/>
        <pubDate>Sun, 18 Dec 2022 18:21:37 +0800</pubDate>
        <lastBuildDate>Sun, 18 Dec 2022 18:21:37 +0800</lastBuildDate>
        <generator>Jekyll v4.2.2</generator>
        
            <item>
                <title>Apple 檔案系統（APFS）的 Firmlink 黑魔法</title>
                <description>&lt;p&gt;Apple 自 macOS Catalina 起引入了一個新的檔案階層系統，用以區隔同一個 Apple 檔案系統（&lt;a href=&quot;https://developer.apple.com/documentation/foundation/file_system/about_apple_file_system&quot;&gt;APFS&lt;/a&gt;）容器（Container）內的系統以及使用者資料：&lt;strong&gt;Macintosh HD&lt;/strong&gt; 作為系統檔案使用並以唯讀形式掛載；&lt;strong&gt;Macintosh HD - Data&lt;/strong&gt; 作為使用者互動檔案（例如：應用程式、偏好設定檔案）使用並以可讀寫形式掛載。容器中亦包含了其他像是 &lt;strong&gt;Recovery&lt;/strong&gt; 這種用於系統還原（RecoveryOS）使用的磁區（Volume）：&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;diskutil list
/dev/disk0 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;internal, physical&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;:
   &lt;span class=&quot;c&quot;&gt;#:                       TYPE NAME                    SIZE       IDENTIFIER&lt;/span&gt;
   0:      GUID_partition_scheme                        &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;1.0 TB     disk0
   1:             Apple_APFS_ISC Container disk2         524.3 MB   disk0s1
   2:                 Apple_APFS Container disk3         994.7 GB   disk0s2
   3:        Apple_APFS_Recovery Container disk1         5.4 GB     disk0s3

/dev/disk3 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;synthesized&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;:
   &lt;span class=&quot;c&quot;&gt;#:                       TYPE NAME                    SIZE       IDENTIFIER&lt;/span&gt;
   0:      APFS Container Scheme -                      +994.7 GB   disk3
                                 Physical Store disk0s2
   1:                APFS Volume Macintosh HD - Data     410.4 GB   disk3s1
   2:                APFS Volume Macintosh HD            8.9 GB     disk3s3
   3:              APFS Snapshot com.apple.os.update-... 8.9 GB     disk3s3s1
   4:                APFS Volume Preboot                 4.7 GB     disk3s4
   5:                APFS Volume Recovery                769.9 MB   disk3s5
   6:                APFS Volume VM                      2.1 GB     disk3s6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;每個磁區的角色（Role）於它們的 Superblock 架構（&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apfs_superblock_t&lt;/code&gt;）中指派，相關定義可在 Apple 官方的 &lt;a href=&quot;https://developer.apple.com/support/downloads/Apple-File-System-Reference.pdf&quot;&gt;APFS 參考資料&lt;/a&gt;中找到：&lt;/p&gt;

&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#define APFS_VOL_ROLE_NONE      0x0000
#define APFS_VOL_ROLE_SYSTEM    0x0001
#define APFS_VOL_ROLE_USER      0x0002
#define APFS_VOL_ROLE_RECOVERY  0x0004
#define APFS_VOL_ROLE_VM        0x0008
#define APFS_VOL_ROLE_PREBOOT   0x0010
#define APFS_VOL_ROLE_INSTALLER 0x0020
#define APFS_VOL_ROLE_DATA      0x0040
#define APFS_VOL_ROLE_BASEBAND  0x0080
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;雖然當時對於 macOS 來說這是全新的概念，但這項措施其實已經用於 iOS 一段時間。當系統啟動時，&lt;strong&gt;Macintosh HD&lt;/strong&gt;（&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;APFS_VOL_ROLE_SYSTEM&lt;/code&gt;）和 &lt;strong&gt;Macintosh HD - Data&lt;/strong&gt;（&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;APFS_VOL_ROLE_DATA&lt;/code&gt;）兩個磁區會顯示為單一邏輯磁區，且兩者的內容將透過 Firmlink 合併為一。&lt;/p&gt;

&lt;h2 id=&quot;firmlinks&quot;&gt;Firmlinks&lt;/h2&gt;

&lt;p&gt;Firmlink 類似於 Symbolic Link 但允許雙向移動且僅適用於目錄。這有效的使 macOS 能夠整併 &lt;strong&gt;Macintosh HD&lt;/strong&gt; 及 &lt;strong&gt;Macintosh HD - Data&lt;/strong&gt; 的內容，例如：位於唯讀磁區 &lt;strong&gt;Macintosh HD&lt;/strong&gt; 的目錄 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/Users&lt;/code&gt; 實際上為 &lt;strong&gt;Macintosh HD - Data&lt;/strong&gt; 這個可讀寫磁區上 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/Shared&lt;/code&gt; 目錄的 Firmlink。此項設計同時也讓 Apple’s 系統完整性保護（System Integrity Protection，SIP）能更加完美的銜接，例如：受 SIP 保護的系統應用程式安裝於唯讀目錄 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/System/Applications&lt;/code&gt;，而使用者應用程式則可被安裝於 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/Applications&lt;/code&gt;，然而使用者僅會看到兩者內容合併顯示於根目錄下的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/Applications&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;系統預設的 Firmlink 可於 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/share/firmlinks&lt;/code&gt; 中查詢：&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; /usr/share/firmlinks
/AppleInternal	AppleInternal
/Applications	Applications
/Library	Library
/System/Library/Caches	System/Library/Caches
/System/Library/Assets	System/Library/Assets
/System/Library/PreinstalledAssets	System/Library/PreinstalledAssets
/System/Library/AssetsV2	System/Library/AssetsV2
/System/Library/PreinstalledAssetsV2	System/Library/PreinstalledAssetsV2
/System/Library/CoreServices/CoreTypes.bundle/Contents/Library	System/Library/CoreServices/CoreTypes.bundle/Contents/Library
/System/Library/Speech	System/Library/Speech
/Users	Users
/Volumes	Volumes
/cores	cores
/opt	opt
/private	private
/usr/local	usr/local
/usr/libexec/cups	usr/libexec/cups
/usr/share/snmp	usr/share/snmp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;建立你自己的合成-firmlink&quot;&gt;建立你自己的合成 Firmlink&lt;/h2&gt;

&lt;p&gt;自 Catalina 起要於根目錄下建立目錄，我們必須仰賴合成 Firmlink（Synthetic Firmlink）：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc&lt;/code&gt; 目錄下新增一個名為 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;synthetic.conf&lt;/code&gt; 的檔案。&lt;/li&gt;
  &lt;li&gt;確保該檔案的權限設定如下：&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-config highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;：讀，寫
&lt;span class=&quot;n&quot;&gt;wheel&lt;/span&gt;：讀
&lt;span class=&quot;n&quot;&gt;everyone&lt;/span&gt;：讀
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;（通常只要透過指令「&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo touch /etc/synthetic.conf&lt;/code&gt;」即可完成上述設定。）&lt;/p&gt;

&lt;p&gt;要將目錄 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/Users/foo/bar&lt;/code&gt; 連結至 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/baz&lt;/code&gt;，我們可以新增一個新的條目至剛剛建立的檔案：&lt;/p&gt;

&lt;div class=&quot;language-config highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# create a firmlink named &quot;baz&quot; at / which points to &quot;Users/foo/bar&quot;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;baz&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Users&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;foo&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;bar&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;你也可以檢視 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;man synthetic.conf&lt;/code&gt; 來查詢所有可用的選項。請注意，兩個路徑中間必須使用一個「&lt;strong&gt;tab&lt;/strong&gt;」做分隔，使用空白符號將不會產生作用。同時路徑的開頭不包含反斜線（&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/&lt;/code&gt;）。重新啟動系統後剛剛的變更即會生效。&lt;/p&gt;
</description>
                <pubDate>Sun, 18 Dec 2022 17:35:35 +0800</pubDate>
                <link>https://one.vg/tw/blog/apple-file-system-firmlink-black-magic</link>
                <guid isPermaLink="true">https://one.vg/tw/blog/apple-file-system-firmlink-black-magic</guid>
                
                <category>Mac</category>
                
                <category>macOS</category>
                
                
                <category>tw</category>
                
            </item>
        
            <item>
                <title>Apple File System (APFS) Firmlink Black Magic</title>
                <description>&lt;p&gt;Apple introduced a new way of file system hierarchy that can separate the system and user data within an &lt;a href=&quot;https://developer.apple.com/documentation/foundation/file_system/about_apple_file_system&quot;&gt;APFS&lt;/a&gt;  system container since macOS Catalina: &lt;strong&gt;Macintosh HD&lt;/strong&gt;, a volume which is mounted as read-only for system files; and &lt;strong&gt;Macintosh HD - Data&lt;/strong&gt;, a volume which is mounted as writable and for all user intractable files such as applications and preferences. There are also other volumes such as &lt;strong&gt;Recovery&lt;/strong&gt; that is used for RecoveryOS:&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;diskutil list
/dev/disk0 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;internal, physical&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;:
   &lt;span class=&quot;c&quot;&gt;#:                       TYPE NAME                    SIZE       IDENTIFIER&lt;/span&gt;
   0:      GUID_partition_scheme                        &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;1.0 TB     disk0
   1:             Apple_APFS_ISC Container disk2         524.3 MB   disk0s1
   2:                 Apple_APFS Container disk3         994.7 GB   disk0s2
   3:        Apple_APFS_Recovery Container disk1         5.4 GB     disk0s3

/dev/disk3 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;synthesized&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;:
   &lt;span class=&quot;c&quot;&gt;#:                       TYPE NAME                    SIZE       IDENTIFIER&lt;/span&gt;
   0:      APFS Container Scheme -                      +994.7 GB   disk3
                                 Physical Store disk0s2
   1:                APFS Volume Macintosh HD - Data     410.4 GB   disk3s1
   2:                APFS Volume Macintosh HD            8.9 GB     disk3s3
   3:              APFS Snapshot com.apple.os.update-... 8.9 GB     disk3s3s1
   4:                APFS Volume Preboot                 4.7 GB     disk3s4
   5:                APFS Volume Recovery                769.9 MB   disk3s5
   6:                APFS Volume VM                      2.1 GB     disk3s6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The role of each volume was assigned in its superblock structure (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apfs_superblock_t&lt;/code&gt;), which can be found in Apple’s &lt;a href=&quot;https://developer.apple.com/support/downloads/Apple-File-System-Reference.pdf&quot;&gt;APFS Reference&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#define APFS_VOL_ROLE_NONE      0x0000
#define APFS_VOL_ROLE_SYSTEM    0x0001
#define APFS_VOL_ROLE_USER      0x0002
#define APFS_VOL_ROLE_RECOVERY  0x0004
#define APFS_VOL_ROLE_VM        0x0008
#define APFS_VOL_ROLE_PREBOOT   0x0010
#define APFS_VOL_ROLE_INSTALLER 0x0020
#define APFS_VOL_ROLE_DATA      0x0040
#define APFS_VOL_ROLE_BASEBAND  0x0080
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Although this is new to macOS at the time, the scheme was already used in iOS for a while. When the system booted, both &lt;strong&gt;Macintosh HD&lt;/strong&gt; (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;APFS_VOL_ROLE_SYSTEM&lt;/code&gt;) and &lt;strong&gt;Macintosh HD - Data&lt;/strong&gt; (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;APFS_VOL_ROLE_DATA&lt;/code&gt;) will be presented as a single logical volume with both their contents combined with the magic of firmlinks.&lt;/p&gt;

&lt;h2 id=&quot;firmlinks&quot;&gt;Firmlinks&lt;/h2&gt;

&lt;p&gt;Firmlinks are similar to symbolic links but allows bi-directional travel and only for directories. This effectively allow macOS to merge the contents of &lt;strong&gt;Macintosh HD&lt;/strong&gt; and &lt;strong&gt;Macintosh HD - Data&lt;/strong&gt;, e.g. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/Users&lt;/code&gt; on the read-only &lt;strong&gt;Macintosh HD&lt;/strong&gt; is essentially a firmlink of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/Shared&lt;/code&gt; on the writable &lt;strong&gt;Macintosh HD - Data&lt;/strong&gt;. This would also make Apple’s System Integrity Protection (SIP) more seamless, e.g. SIP-protected system applications resides in read-only &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/System/Applications&lt;/code&gt; and user applications can be installed in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/Applications&lt;/code&gt;, while the user see the combination of both in the root &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/Applications&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The system firmlinks can be found at &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/share/firmlinks&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; /usr/share/firmlinks
/AppleInternal	AppleInternal
/Applications	Applications
/Library	Library
/System/Library/Caches	System/Library/Caches
/System/Library/Assets	System/Library/Assets
/System/Library/PreinstalledAssets	System/Library/PreinstalledAssets
/System/Library/AssetsV2	System/Library/AssetsV2
/System/Library/PreinstalledAssetsV2	System/Library/PreinstalledAssetsV2
/System/Library/CoreServices/CoreTypes.bundle/Contents/Library	System/Library/CoreServices/CoreTypes.bundle/Contents/Library
/System/Library/Speech	System/Library/Speech
/Users	Users
/Volumes	Volumes
/cores	cores
/opt	opt
/private	private
/usr/local	usr/local
/usr/libexec/cups	usr/libexec/cups
/usr/share/snmp	usr/share/snmp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;create-your-own-synthetic-firmlinks&quot;&gt;Create Your Own Synthetic Firmlinks&lt;/h2&gt;

&lt;p&gt;To create root-level directories since Catalina, we need to rely on synthetic firmlinks:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Create a file in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc&lt;/code&gt; named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;synthetic.conf&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;Make sure its permissions were set to:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-config highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;: &lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;, &lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;wheel&lt;/span&gt;: &lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;everyone&lt;/span&gt;: &lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(Usually command “&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo touch /etc/synthetic.conf&lt;/code&gt;” would do all the above.)&lt;/p&gt;

&lt;p&gt;In order to link directory &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/Users/foo/bar&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/baz&lt;/code&gt;, we can add a new entry to the file we just created as following:&lt;/p&gt;

&lt;div class=&quot;language-config highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# create a firmlink named &quot;baz&quot; at / which points to &quot;Users/foo/bar&quot;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;baz&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Users&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;foo&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;bar&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can also check &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;man synthetic.conf&lt;/code&gt; for all available options. Note that the two should be separate with a &lt;strong&gt;tab&lt;/strong&gt; instead of spaces or it won’t work. Also the paths are not started with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/&lt;/code&gt;. Now reboot the system and see the changes we just made.&lt;/p&gt;
</description>
                <pubDate>Sun, 18 Dec 2022 17:35:35 +0800</pubDate>
                <link>https://one.vg/blog/apple-file-system-firmlink-black-magic</link>
                <guid isPermaLink="true">https://one.vg/blog/apple-file-system-firmlink-black-magic</guid>
                
                <category>Mac</category>
                
                <category>macOS</category>
                
                
            </item>
        
            <item>
                <title>調整 VMware 中 Windows 11 on ARM 顯示器解析度</title>
                <description>&lt;p&gt;Windows on ARM 因微軟授權的因素目前尚未被 VMware Fusion 所支援。當 Parallel 決定採取全然不同的策略並提供一定程度的支援時，VMware 與微軟的緊密合作關係迫使他們只能照規定走。不過廣大的網友們依然找到了在搭載了 Apple Silicon 的 Mac 上安裝的方法且解決了大部分會遇到的小問題，但目前仍因為缺乏 VMware 官方顯示驅動程式的緣故無法調整虛擬機顯示器解析度。由於顯示器解析度繼承自 EFI 設定，我們可以透過例如像 &lt;a href=&quot;https://en.wikipedia.org/wiki/GNU_GRUB&quot;&gt;GNU GRUB&lt;/a&gt; 這類可調整參數的開機程式（Bootloader）來進行變更。&lt;/p&gt;

&lt;h2 id=&quot;取得-grub-執行檔供-efi-使用&quot;&gt;取得 GRUB 執行檔供 EFI 使用&lt;/h2&gt;

&lt;p&gt;與其為了 GRUB 下載整個 Linux 映像檔案，我們可以只下載&lt;a href=&quot;https://deb.debian.org/debian/pool/main/g/grub2/&quot;&gt;這裡&lt;/a&gt;的執行檔。尋找「&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grub-efi-arm64-bin_2.##-#_arm64.deb&lt;/code&gt;」這種檔名的檔案並下載。對 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.deb&lt;/code&gt; 進行解壓縮，並在再次解壓縮裡面的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;data.tar.xz&lt;/code&gt;。你可以使用像是 &lt;a href=&quot;https://www.keka.io/&quot;&gt;Keka&lt;/a&gt; 這類的圖形化工具程式，又或者使用 macOS 內建的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tar&lt;/code&gt; 指令：&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; https://deb.debian.org/debian/pool/main/g/grub2/grub-efi-arm64-bin_2.06-3_arm64.deb
&lt;span class=&quot;nb&quot;&gt;tar&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; grub-efi-arm64-bin_2.06-3_arm64.deb &lt;span class=&quot;nt&quot;&gt;-zxv&lt;/span&gt; data.tar.xz
&lt;span class=&quot;nb&quot;&gt;mkdir &lt;/span&gt;debian
&lt;span class=&quot;nb&quot;&gt;tar&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; data.tar.xz &lt;span class=&quot;nt&quot;&gt;--to-stdout&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-zxv&lt;/span&gt; usr/lib/grub/arm64-efi/monolithic/grubaa64.efi &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; debian/grubaa64.efi
&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; grub-efi-arm64-bin_2.06-3_arm64.deb data.tar.xz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;建立-grub-選單設定檔案&quot;&gt;建立 GRUB 選單設定檔案&lt;/h2&gt;

&lt;p&gt;建立一個名為 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grub.cfg&lt;/code&gt; 的新檔案並將其放置於 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grubaa64.efi&lt;/code&gt; 相同的的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;debian&lt;/code&gt; 資料夾內：&lt;/p&gt;

&lt;div class=&quot;language-config highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timeout&lt;/span&gt;=&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;default&lt;/span&gt;=&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gfxmode&lt;/span&gt;=&lt;span class=&quot;m&quot;&gt;1920&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x1200&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;menuentry&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Windows 11&quot;&lt;/span&gt; {
	&lt;span class=&quot;n&quot;&gt;insmod&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gfxterm&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;terminal_output&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gfxterm&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;chainloader&lt;/span&gt; /&lt;span class=&quot;n&quot;&gt;efi&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;microsoft&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;boot&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;bootmgfw&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;efi&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;boot&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;這份設定檔會鏈鎖載入 Windows Boot Manager 前將解析度設定為 1920x1200。你可以將解析度修改為任何 VM 支援的解析度數值。錯誤的數值將以預設值處理。&lt;/p&gt;

&lt;h2 id=&quot;設定-grub&quot;&gt;設定 GRUB&lt;/h2&gt;

&lt;p&gt;在 VMware Fusion 中啟動 Windows 11 虛擬機。找個方法將先前建立的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;debian&lt;/code&gt; 複製進虛擬機當中。選取「開始 &amp;gt; 搜尋 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cmd.exe&lt;/code&gt; &amp;gt; 以系統管理員身分執行」。執行下列指令來掛載 EFI 啟動磁區並將 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;debian&lt;/code&gt; 中的內容放置於 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;EFI/debian&lt;/code&gt; 中。假設你的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;debian&lt;/code&gt; 資料夾位於「&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;C:\&lt;/code&gt;」之下：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-cmd&quot;&gt;mountvol a: /s
a:
cd EFI
mdkir debian
cd debian
xcopy c:\debian .
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;關閉 Windows 虛擬機。在 Fusion 的虛擬機設定當中，選擇「Startup Disk」，按住 Option 鍵並選取「Restart to firmware…」開機進入 BIOS：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/c8175a71-7b27-47fa-9de6-d6c41f3b2509_001.png&quot; alt=&quot;Startup Disk&quot; /&gt;&lt;/p&gt;

&lt;p&gt;在 BIOS 中，依下列步驟為 GRUB 建立新的項目：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;選取「Boot Maintenance Manager &amp;gt; Boot Options &amp;gt; Add Boot Option」。&lt;/li&gt;
  &lt;li&gt;選取包含「&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.../HD(...&lt;/code&gt;」字串的項目，接著依序選擇「&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;EFI&amp;gt;&lt;/code&gt;」、「&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;debian&amp;gt;&lt;/code&gt;」和「&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grubaa64.efi&lt;/code&gt;」。&lt;/li&gt;
  &lt;li&gt;填寫新建立的開機選項的描述，接著選取「Commit Changes and Exit」。&lt;/li&gt;
  &lt;li&gt;選取「Boot Options &amp;gt; Change Boot Order &amp;gt; Change the Order」。&lt;/li&gt;
  &lt;li&gt;將新建立的選項移至最上方。&lt;/li&gt;
  &lt;li&gt;選取「Go Back To Main Page」接著按下 ESC 鍵，輸入 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;y&lt;/code&gt; 儲存變更。&lt;/li&gt;
  &lt;li&gt;選取「Continue」。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;現在虛擬機將開機制 GRUB 而非 Windows Boot Manager：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/c8175a71-7b27-47fa-9de6-d6c41f3b2509_002.jpg&quot; alt=&quot;GRUB&quot; /&gt;&lt;/p&gt;

&lt;p&gt;進入系統後顯示器解析度為 1920x1200：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/c8175a71-7b27-47fa-9de6-d6c41f3b2509_003.jpg&quot; alt=&quot;Windows on ARM&quot; /&gt;&lt;/p&gt;
</description>
                <pubDate>Tue, 12 Jul 2022 16:35:50 +0800</pubDate>
                <link>https://one.vg/tw/blog/change-windows-on-arm-display-resolution-in-vmware</link>
                <guid isPermaLink="true">https://one.vg/tw/blog/change-windows-on-arm-display-resolution-in-vmware</guid>
                
                <category>VMware</category>
                
                <category>Windows</category>
                
                
                <category>tw</category>
                
            </item>
        
            <item>
                <title>Change Windows 11 on ARM Display Resolution in VMware</title>
                <description>&lt;p&gt;Windows on ARM isn’t yet supported by VMware Fusion due to Microsoft’s licensing. While Parallel decided to take a complete different route and have it supported in some degree, VMware’s close relationship with Microsoft has made them play by the book. But the Internet has found its way to have it installed on Apple Silicon Macs since early on and resolved most of the hiccups it encountered. Still there’s no way to change the display resolution due to lack of graphic drivers from VMware. Since the display resolution was inherited from the EFI settings, it can be changed with the help of other configurable bootloaders such as &lt;a href=&quot;https://en.wikipedia.org/wiki/GNU_GRUB&quot;&gt;GNU GRUB&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;get-grub-binary-for-efi&quot;&gt;Get GRUB Binary for EFI&lt;/h2&gt;

&lt;p&gt;Instead of getting the whole Linux image just for GRUB, we can just download the binary &lt;a href=&quot;https://deb.debian.org/debian/pool/main/g/grub2/&quot;&gt;here&lt;/a&gt;. Look for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grub-efi-arm64-bin_2.##-#_arm64.deb&lt;/code&gt; and download it. Extract the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.deb&lt;/code&gt; then extract again the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;data.tar.xz&lt;/code&gt; within. You can either use GUI tools such as &lt;a href=&quot;https://www.keka.io/&quot;&gt;Keka&lt;/a&gt; or the macOS built-in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tar&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; https://deb.debian.org/debian/pool/main/g/grub2/grub-efi-arm64-bin_2.06-3_arm64.deb
&lt;span class=&quot;nb&quot;&gt;tar&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; grub-efi-arm64-bin_2.06-3_arm64.deb &lt;span class=&quot;nt&quot;&gt;-zxv&lt;/span&gt; data.tar.xz
&lt;span class=&quot;nb&quot;&gt;mkdir &lt;/span&gt;debian
&lt;span class=&quot;nb&quot;&gt;tar&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; data.tar.xz &lt;span class=&quot;nt&quot;&gt;--to-stdout&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-zxv&lt;/span&gt; usr/lib/grub/arm64-efi/monolithic/grubaa64.efi &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; debian/grubaa64.efi
&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; grub-efi-arm64-bin_2.06-3_arm64.deb data.tar.xz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;create-grub-menu-configuration-file&quot;&gt;Create GRUB Menu Configuration File&lt;/h2&gt;

&lt;p&gt;Create a new file named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grub.cfg&lt;/code&gt; and placed it within the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;debian&lt;/code&gt; folder with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grubaa64.efi&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-config highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timeout&lt;/span&gt;=&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;default&lt;/span&gt;=&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gfxmode&lt;/span&gt;=&lt;span class=&quot;m&quot;&gt;1920&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x1200&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;menuentry&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Windows 11&quot;&lt;/span&gt; {
	&lt;span class=&quot;n&quot;&gt;insmod&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gfxterm&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;terminal_output&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gfxterm&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;chainloader&lt;/span&gt; /&lt;span class=&quot;n&quot;&gt;efi&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;microsoft&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;boot&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;bootmgfw&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;efi&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;boot&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This will make GRUB set the display resolution to 1920x1200 before chain loading the Windows Boot Manager. You can change the resolution to any value that GRUB supports on your VM. Invalid values will revert it back to default.&lt;/p&gt;

&lt;h2 id=&quot;setup-grub&quot;&gt;Setup GRUB&lt;/h2&gt;

&lt;p&gt;Boot the Windows 11 VM in VMware Fusion. Find a way to copy the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;debian&lt;/code&gt; folder we created in the last step into the VM. Select “Start &amp;gt; Search for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cmd.exe&lt;/code&gt; &amp;gt; Open as Administrator”. Run the following command to mount the EFI partition and copy the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;debian&lt;/code&gt; folder to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;EFI/debian&lt;/code&gt;. Assuming you the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;debian&lt;/code&gt; folder is located directly under “&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;C:\&lt;/code&gt;”:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-cmd&quot;&gt;mountvol a: /s
a:
cd EFI
mdkir debian
cd debian
xcopy c:\debian .
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now shutdown the Windows VM. In the VM settings of Fusion, open “Startup Disk”, hold the Option Key and select “Restart to firmware…” to boot into BIOS:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/c8175a71-7b27-47fa-9de6-d6c41f3b2509_001.png&quot; alt=&quot;Startup Disk&quot; /&gt;&lt;/p&gt;

&lt;p&gt;In BIOS, follow these steps to create a new entry for GRUB:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Select “Boot Maintenance Manager &amp;gt; Boot Options &amp;gt; Add Boot Option”.&lt;/li&gt;
  &lt;li&gt;Select the entry with “&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.../HD(...&lt;/code&gt;”, follow by “&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;EFI&amp;gt;&lt;/code&gt;”, “&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;debian&amp;gt;&lt;/code&gt;” and “&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grubaa64.efi&lt;/code&gt;”.&lt;/li&gt;
  &lt;li&gt;Choose a description for the new boot option then select “Commit Changes and Exit”.&lt;/li&gt;
  &lt;li&gt;Select “Boot Options &amp;gt; Change Boot Order &amp;gt; Change the Order”.&lt;/li&gt;
  &lt;li&gt;Move the newly created option to the top.&lt;/li&gt;
  &lt;li&gt;Select “Go Back To Main Page” then press ESC key, type &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;y&lt;/code&gt; to save your changes.&lt;/li&gt;
  &lt;li&gt;Select “Continue”.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;It should now boot to GRUB instead of Windows Boot Manager:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/c8175a71-7b27-47fa-9de6-d6c41f3b2509_002.jpg&quot; alt=&quot;GRUB&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The display resolution is now 1920x1200:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/c8175a71-7b27-47fa-9de6-d6c41f3b2509_003.jpg&quot; alt=&quot;Windows on ARM&quot; /&gt;&lt;/p&gt;
</description>
                <pubDate>Tue, 12 Jul 2022 16:35:50 +0800</pubDate>
                <link>https://one.vg/blog/change-windows-on-arm-display-resolution-in-vmware</link>
                <guid isPermaLink="true">https://one.vg/blog/change-windows-on-arm-display-resolution-in-vmware</guid>
                
                <category>VMware</category>
                
                <category>Windows</category>
                
                
            </item>
        
            <item>
                <title>在 VMware Fusion 中啟用 HID Passthrough</title>
                <description>&lt;p&gt;最近購買了一副新鍵盤，它在各方面都表現的相當不錯，但只能透過 Windows 環境才能更新韌體。如果嘗試將鍵盤直接透過 USB 連接到 Windows 虛擬機，你將會失望的發現這類的輸入裝置不會顯示在虛擬機的 USB 裝置清單中。&lt;/p&gt;

&lt;p&gt;其背後的原因其實相當合理：因為輸入裝置（HID）如果被直接指派給虛擬機，將可能導致使用者失去對主作業系統的控制權，因此輸入裝置的直通輸入（HID Passthrough）功能預設被停用。VMware 提供了相關的&lt;a href=&quot;https://kb.vmware.com/s/article/1003418&quot;&gt;知識庫文件&lt;/a&gt;來引導使用者如何啟用此功能。不過在經過一些測試後，此文件似乎對於最新版本的 VMware Fusion（12.2.3 以及 Public Tech Preview 21H1）無效，甚至可能反過來導致此功能無法使用。&lt;/p&gt;

&lt;h2 id=&quot;如何啟用輸入裝置直通輸入hid-passthrough&quot;&gt;如何啟用輸入裝置直通輸入（HID Passthrough）&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;完全退出 Fusion。&lt;/li&gt;
  &lt;li&gt;編輯 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/Library/Preferences/VMware Fusion/config&lt;/code&gt;（需管理者權限）。若檔案不存在則建立一個新檔案。&lt;/li&gt;
  &lt;li&gt;在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config&lt;/code&gt; 檔案中加入下列內容：
    &lt;div class=&quot;language-config highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;usb&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;generic&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;allowHID&lt;/span&gt; = &lt;span class=&quot;s2&quot;&gt;&quot;TRUE&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;usb&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;generic&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;allowLastHID&lt;/span&gt; = &lt;span class=&quot;s2&quot;&gt;&quot;TRUE&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;如果你想要一併啟用視訊裝置直通輸出，可以再加入下列內容：&lt;/p&gt;
    &lt;div class=&quot;language-config highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;vusbcamera&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;passthrough&lt;/span&gt; = &lt;span class=&quot;s2&quot;&gt;&quot;TRUE&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;儲存檔案並重新啟動 Fusion。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;以上步驟將會對所有此電腦中的虛擬機啟用 USB 輸入裝置的直通輸入功能。如果輸入裝置仍未出現，請檢查對應虛擬機的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.vmx&lt;/code&gt; 檔案中是否有上述內容並將他們移除。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/3ed4ac9f-a471-4024-a70c-6ebfc40bdb8b_001.png&quot; alt=&quot;截圖&quot; /&gt;
&lt;em&gt;輸入裝置現在可以直接與虛擬機進行連接。&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;請留意，一旦裝置以此方式連接，必須實體與電腦中斷連線方能與該虛擬機解除連線。&lt;/p&gt;

&lt;h2 id=&quot;其他用途&quot;&gt;其他用途&lt;/h2&gt;

&lt;p&gt;因為輸入裝置處於直通輸入模式，USB 安全金鑰（Security Key）可用於虛擬機的 Windows Hello 功能。&lt;/p&gt;
</description>
                <pubDate>Sun, 10 Jul 2022 04:31:32 +0800</pubDate>
                <link>https://one.vg/tw/blog/hid-passthrough-in-vmware-fusion</link>
                <guid isPermaLink="true">https://one.vg/tw/blog/hid-passthrough-in-vmware-fusion</guid>
                
                <category>VMware</category>
                
                <category>macOS</category>
                
                
                <category>tw</category>
                
            </item>
        
            <item>
                <title>HID Passthrough in VMware Fusion</title>
                <description>&lt;p&gt;I recently bought a keyboard, which is all nice except that it requires a Windows environment to update the firmware. If you try connecting the keyboard directly to a Windows VM in VMware Fusion via USB, you’d be disappointed to find out that they were not even shown in the device list.&lt;/p&gt;

&lt;p&gt;The reason behind it is actually valid: since human interface devices (HID) being assigned directly to the VM could result in losing control to the host OS, thus HID passthrough was disabled by default. VMware does provide a &lt;a href=&quot;https://kb.vmware.com/s/article/1003418&quot;&gt;KB article&lt;/a&gt; to guide you on how to enable it. But after some testing, seems in the latest version of VMware Fusion (12.2.3 and Public Tech Preview 21H1), doing so not only won’t get you the result you want, it will actually prevent it.&lt;/p&gt;

&lt;h2 id=&quot;how-to-enable-hid-passthrough&quot;&gt;How to Enable HID Passthrough&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;Quit Fusion completely.&lt;/li&gt;
  &lt;li&gt;Edit the file &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/Library/Preferences/VMware Fusion/config&lt;/code&gt; (requires admin privileges). Create one if it wasn’t existed already.&lt;/li&gt;
  &lt;li&gt;Add the following lines to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config&lt;/code&gt; file:
    &lt;div class=&quot;language-config highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;usb&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;generic&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;allowHID&lt;/span&gt; = &lt;span class=&quot;s2&quot;&gt;&quot;TRUE&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;usb&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;generic&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;allowLastHID&lt;/span&gt; = &lt;span class=&quot;s2&quot;&gt;&quot;TRUE&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;If you wish to passthrough USB cameras, you can also add the following line:&lt;/p&gt;
    &lt;div class=&quot;language-config highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;vusbcamera&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;passthrough&lt;/span&gt; = &lt;span class=&quot;s2&quot;&gt;&quot;TRUE&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Save the file and relaunch Fusion.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This will essentially enable USB HID passthrough for all your VM. If the HID devices still are not there, check the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.vmx&lt;/code&gt; file if the above lines were there and remove them.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/3ed4ac9f-a471-4024-a70c-6ebfc40bdb8b_001.png&quot; alt=&quot;Screenshot&quot; /&gt;
&lt;em&gt;HID devices can now be connect to VM directly.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Note that once you did, you will have to disconnect them physically in order to disconnect them from the VM.&lt;/p&gt;

&lt;h2 id=&quot;other-usage&quot;&gt;Other Usage&lt;/h2&gt;

&lt;p&gt;Since the HID device is in passthrough mode, USB security key devices can now be used for Windows Hello in the VM.&lt;/p&gt;
</description>
                <pubDate>Sun, 10 Jul 2022 04:31:32 +0800</pubDate>
                <link>https://one.vg/blog/hid-passthrough-in-vmware-fusion</link>
                <guid isPermaLink="true">https://one.vg/blog/hid-passthrough-in-vmware-fusion</guid>
                
                <category>VMware</category>
                
                <category>macOS</category>
                
                
            </item>
        
            <item>
                <title>GitHub Pages 的多語言 404 頁面</title>
                <description>&lt;p&gt;許多具備程式語言能力的人（包含我自己）偏好靜態網站：它們相對快速、更加安全且幾乎可以被託管於任何地方（甚至免費）。雖然靜態網站仍有許多缺點（例如：缺乏互動性），但大多數可以透過第三方服務來達成與動態網站相近的功能。總體而言它仍是多數個人網站的不錯選擇。&lt;/p&gt;

&lt;h2 id=&quot;github-pages&quot;&gt;GitHub Pages&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://pages.github.com/&quot;&gt;GitHub Pages&lt;/a&gt; 是目前最受歡迎的靜態網站託管平台之一：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;它的服務是免費的。&lt;/li&gt;
  &lt;li&gt;它原生支援部落格軟體 &lt;a href=&quot;https://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt;。&lt;/li&gt;
  &lt;li&gt;它支援&lt;a href=&quot;https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/about-custom-domains-and-github-pages&quot;&gt;自訂網域&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;它可透過 &lt;a href=&quot;https://letsencrypt.org/&quot;&gt;Let’s Encrypt&lt;/a&gt; 支援 &lt;a href=&quot;https://docs.github.com/en/pages/getting-started-with-github-pages/securing-your-github-pages-site-with-https&quot;&gt;HTTPS&lt;/a&gt;。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;多年來我使用此服務且認為它相當優秀。只是接著便是「雖然…可是…」的部分了。&lt;/p&gt;

&lt;h2 id=&quot;多語言-404-頁面&quot;&gt;多語言 404 頁面&lt;/h2&gt;

&lt;p&gt;雖然 GitHub &lt;a href=&quot;https://docs.github.com/en/pages/getting-started-with-github-pages/creating-a-custom-404-page-for-your-github-pages-site&quot;&gt;允許&lt;/a&gt;在人們嘗試存取網站不存在的頁面時顯示客製化的 404 錯誤頁面且對多數人而言它沒有什麼大問題，但如果打算將你的網站多國語言化便會是個問題：因為它只允許單一版本的錯誤頁面。舉例來說，當檢視此部落格的中文版本時，如果你不知何故點選了一個應為中文頁面的不存在網址，像是：「&lt;a href=&quot;https://one.vg/tw/nonexistent&quot;&gt;https://one.vg/tw/nonexistent&lt;/a&gt;」將會被 GitHub 導向英文版的「&lt;a href=&quot;https://one.vg/404.html&quot;&gt;https://one.vg/404.html&lt;/a&gt;」。此行為可能會導致不黯英文的使用者混亂且無法由此繼續。&lt;/p&gt;

&lt;p&gt;其中一個解決方式為利用 JavaScript 基於網誌路徑來顯示對應的語系字串。然而，這種做法可能使經常變動佈局（layout）或動態網址生成的網站難以維護。我的做法是建立一個 404 頁面範本來讓各語系能擁有自己的對應頁面：&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
├── _data/
│   └── settings.yml &lt;span class=&quot;c&quot;&gt;# 定義語系清單&lt;/span&gt;
├── _includes/
│   └── 404.html     &lt;span class=&quot;c&quot;&gt;# 頁面範本&lt;/span&gt;
├── tw/
│   └── _pages/
│       └── 404.html &lt;span class=&quot;c&quot;&gt;# 中文（台灣）&lt;/span&gt;
└── 404.html         &lt;span class=&quot;c&quot;&gt;# 英文&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;當使用者抵達英文版的頁面時，他們將會被轉而導向對應的語言版本頁面（如本站的情況）。如此我們可以保持更清楚的網站程式碼架構且更易於依照各語言的需求客製化對應頁面。&lt;/p&gt;

&lt;p&gt;範本的部分，可以直接使用原先的 404 頁面並移除前綴的 Front Matter 區域；位於根目錄下的 404 頁面，我們可以將其修改為類似下面的狀態：&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;---
layout: default
title: &apos;Page Not Found&apos;
permalink: /404.html
---
{% include 404.html %}

&lt;span class=&quot;nt&quot;&gt;&amp;lt;script&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;onload&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;locale&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pathname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;locale_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;site&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;settings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;locale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;locale_list&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}};&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;locale_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;includes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;locale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;redirect&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;encodeURI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pathname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;href&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;origin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;locale&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;/404.html?redirect=&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;redirect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;以上這段語法會讀取定義於 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_data/settings.yml&lt;/code&gt; 內的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;locale_list&lt;/code&gt; 陣列，作為路徑導向判斷的允許清單：&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;locale_list&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;[&quot;en&quot;,&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;tw&quot;]&apos;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;接著它會檢查網址路徑，嘗試判斷對應的語系並進行重新導向，同時將目前的路徑作為請求參數一併傳送，以便重新導向後可以將網址列恢復為原先用戶輸入的內容。請留意我們只使用路徑部分而非整個 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;href&lt;/code&gt; 值，以避免&lt;a href=&quot;https://cwe.mitre.org/data/definitions/601.html&quot;&gt;開放式重導向&lt;/a&gt;漏洞。&lt;/p&gt;

&lt;p&gt;其他語系的頁面，我們可以採用類似下方的做法：&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;---
layout: default
title: &apos;找不到網頁&apos;
permalink: /tw/404.html
locale: tw
---
{% include 404.html %}

&lt;span class=&quot;nt&quot;&gt;&amp;lt;script&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;onload&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;search&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;queryString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;urlParams&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;URLSearchParams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;queryString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;redirect&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;decodeURI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;urlParams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;redirect&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;history&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pushState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;{{ site.url }}&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;redirect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;此頁面會顯示必要的內容並在不重新載入頁面的情況下還原網址列內容。你可以透過下面的連結來檢視相關效果：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://one.vg/nonexistent&quot;&gt;https://one.vg/nonexistent&lt;/a&gt;（英文）&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://one.vg/tw/nonexistent&quot;&gt;https://one.vg/tw/nonexistent&lt;/a&gt;（中文）&lt;/li&gt;
&lt;/ul&gt;
</description>
                <pubDate>Mon, 27 Jun 2022 15:09:03 +0800</pubDate>
                <link>https://one.vg/tw/blog/multilingual-404-page-for-github-pages</link>
                <guid isPermaLink="true">https://one.vg/tw/blog/multilingual-404-page-for-github-pages</guid>
                
                <category>Coding</category>
                
                <category>Jekyll</category>
                
                
                <category>tw</category>
                
            </item>
        
            <item>
                <title>Multilingual 404 Page for GitHub Pages</title>
                <description>&lt;p&gt;Many of those who can code (myself included) prefer static websites: they are relatively fast, more secure and can be hosted almost anywhere (even for free). Although there are disadvantages of static websites such as lack of interactiveness, most of them can be overcame with 3rd-party services to have features similar to dynamic websites. Overall it’s still a better deal for most personal websites.&lt;/p&gt;

&lt;h2 id=&quot;github-pages&quot;&gt;GitHub Pages&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://pages.github.com/&quot;&gt;GitHub Pages&lt;/a&gt; is currently one of the most popular free platform for hosting static websites:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;It’s free.&lt;/li&gt;
  &lt;li&gt;It supports &lt;a href=&quot;https://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt; blog-aware natively.&lt;/li&gt;
  &lt;li&gt;It supports &lt;a href=&quot;https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/about-custom-domains-and-github-pages&quot;&gt;custom domains&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;It support &lt;a href=&quot;https://docs.github.com/en/pages/getting-started-with-github-pages/securing-your-github-pages-site-with-https&quot;&gt;HTTPS&lt;/a&gt; via &lt;a href=&quot;https://letsencrypt.org/&quot;&gt;Let’s Encrypt&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I’ve been using it for years and it’s terrific. Then there’s the “but” part.&lt;/p&gt;

&lt;h2 id=&quot;multilingual-404-page&quot;&gt;Multilingual 404 Page&lt;/h2&gt;

&lt;p&gt;Although GitHub &lt;a href=&quot;https://docs.github.com/en/pages/getting-started-with-github-pages/creating-a-custom-404-page-for-your-github-pages-site&quot;&gt;does allow you&lt;/a&gt; to display a custom 404 error page when people try to access nonexistent pages on your site and it works fine for most people, it would become a problem if you are trying to make you website multilingual as it only allows a single version of it. For example, when viewing this blog in Chinese, if somehow you clicked on a nonexistent URL path that should’ve been in Chinese localization, e.g. “&lt;a href=&quot;https://one.vg/tw/nonexistent&quot;&gt;https://one.vg/tw/nonexistent&lt;/a&gt;” will be redirect to “&lt;a href=&quot;https://one.vg/404.html&quot;&gt;https://one.vg/404.html&lt;/a&gt;” by GitHub, which is in English. This behavior could be confusing as the users might not be familiar with English and unable to continue from there.&lt;/p&gt;

&lt;p&gt;One way of solving this is using JavaScript to display the designated localization strings based on the pathname of the URL. However, this would be difficult to maintain especially if you change your website layouts frequently or have dynamic URL generation mechanism. My approach is creating a template of 404 page so each localization can have its own version of the page:&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
├── _data/
│   └── settings.yml &lt;span class=&quot;c&quot;&gt;# Defined localization List&lt;/span&gt;
├── _includes/
│   └── 404.html     &lt;span class=&quot;c&quot;&gt;# Template&lt;/span&gt;
├── tw/
│   └── _pages/
│       └── 404.html &lt;span class=&quot;c&quot;&gt;# Chinese (Taiwan)&lt;/span&gt;
└── 404.html         &lt;span class=&quot;c&quot;&gt;# English&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Once the users landed on the English version of it, they will be redirected to the corresponding localized page (as seen on this website). By doing so, we can have a more clearer structure of the website source code and easier to customized the page to each localization’s need.&lt;/p&gt;

&lt;p&gt;For the template, simply use your original 404 page and remove the front matter section. For the 404 page in the root folder, we can make it something like below:&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;---
layout: default
title: &apos;Page Not Found&apos;
permalink: /404.html
---
{% include 404.html %}

&lt;span class=&quot;nt&quot;&gt;&amp;lt;script&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;onload&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;locale&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pathname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;locale_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;site&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;settings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;locale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;locale_list&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}};&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;locale_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;includes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;locale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;redirect&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;encodeURI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pathname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;href&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;origin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;locale&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;/404.html?redirect=&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;redirect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The script will have the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;locale_list&lt;/code&gt; defined in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_data/settings.yml&lt;/code&gt;, which serves as an allow-list for path redirecting:&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;locale_list&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;[&quot;en&quot;,&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;tw&quot;]&apos;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It will then check the URL pathname and try to determine the corresponding localization, then redirect to it with the current path as query string so we can restore the user-entered one once redirected. Note that we only took the pathname instead of the whole &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;href&lt;/code&gt; value to prevent &lt;a href=&quot;https://cwe.mitre.org/data/definitions/601.html&quot;&gt;open redirect&lt;/a&gt; vulnerability.&lt;/p&gt;

&lt;p&gt;For localized pages, we can do something like below:&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;---
layout: default
title: &apos;找不到網頁&apos;
permalink: /tw/404.html
locale: tw
---
{% include 404.html %}

&lt;span class=&quot;nt&quot;&gt;&amp;lt;script&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;onload&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;search&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;queryString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;urlParams&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;URLSearchParams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;queryString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;redirect&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;decodeURI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;urlParams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;redirect&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;history&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pushState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;{{ site.url }}&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;redirect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The page will display the necessary contents and change the URL of the browser back to its origin with the query value without reloading the page. You can check out the results with the following links:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://one.vg/nonexistent&quot;&gt;https://one.vg/nonexistent&lt;/a&gt; (English)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://one.vg/tw/nonexistent&quot;&gt;https://one.vg/tw/nonexistent&lt;/a&gt; (Chinese)&lt;/li&gt;
&lt;/ul&gt;
</description>
                <pubDate>Mon, 27 Jun 2022 15:09:03 +0800</pubDate>
                <link>https://one.vg/blog/multilingual-404-page-for-github-pages</link>
                <guid isPermaLink="true">https://one.vg/blog/multilingual-404-page-for-github-pages</guid>
                
                <category>Coding</category>
                
                <category>Jekyll</category>
                
                
            </item>
        
            <item>
                <title>Dior by Birkenstock：Tokio 涼鞋心得</title>
                <description>&lt;blockquote&gt;
  &lt;p&gt;人無法過度關心鞋子的選擇。太多的女性認為它們無關緊要，然而一位優雅女性的證明正是她腳上的穿搭。&lt;/p&gt;

  &lt;p&gt;&lt;cite&gt;Christian Dior&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Dior 連袂 Birkenstock（勃肯）的&lt;a href=&quot;https://www.birkenstock.com/us/1774/dior/&quot;&gt;聯名系列&lt;/a&gt; 現在正式發表。此系列作為 Dior 今天男性秋冬系列的一部分首次於一月的巴黎時裝周亮相。&lt;/p&gt;

&lt;p&gt;正式發售的版本包含 Tokio 及 Milano 兩種鞋款，以磨砂小牛皮搭配三種配色，分別為：灰色（此配色之鞋面採用羊毛氈）、黑色以及坯布色（然而實際包裝上的標籤為米色）。另有一種較罕見的刺繡款 Tokio 涼鞋，以致敬 1957 年 Dior 高級訂製服系列。&lt;/p&gt;

&lt;p&gt;
  &lt;video muted=&quot;&quot; loop=&quot;&quot; preload=&quot;auto&quot; controls=&quot;&quot; type=&quot;video/mp4&quot; width=&quot;100%&quot; poster=&quot;/images/2b5fad04-c2fe-410d-8750-556b18899ad8_001.jpg&quot;&gt;
    &lt;source src=&quot;/images/2b5fad04-c2fe-410d-8750-556b18899ad8_001.mp4&quot; /&gt;
  &lt;/video&gt;
  &lt;em&gt;Dior by Birkenstock 聯名系列。&lt;/em&gt;
&lt;/p&gt;

&lt;p&gt;我最後選擇了鍾愛的坯布色 Tokio 涼鞋款式，更容易與我多數的服裝做搭配。&lt;/p&gt;

&lt;h2 id=&quot;包裝與細節&quot;&gt;包裝與細節&lt;/h2&gt;

&lt;p&gt;與 Louis Vuitton 和 Nike 聯名的「Air Force 1」以及「Air Dior」類似，Dior by Birkenstock 聯名系列亦採用了特殊的包裝，採用與 EVA 鞋底相同的 Dior 老花以及 Birkenstock「骨」構成的漸變主題的壓印外盒：&lt;/p&gt;

&lt;div class=&quot;gallery-box&quot;&gt;
  &lt;div class=&quot;gallery&quot;&gt;
    &lt;img src=&quot;/images/2b5fad04-c2fe-410d-8750-556b18899ad8_002.jpg&quot; /&gt;
    &lt;img src=&quot;/images/2b5fad04-c2fe-410d-8750-556b18899ad8_003.jpg&quot; /&gt;
  &lt;/div&gt;
  &lt;em&gt;Dior 老花以及 Birkenstock「骨」構成的漸變主題。&lt;/em&gt;
&lt;/div&gt;

&lt;p&gt;雖然此鞋款相較於普通的勃肯鞋讓人感到更佳精緻，因款式較為特殊，一旦鞋底磨損後可能無法如其他勃肯鞋一般透過 Dior 或者 Birkenstock 官方維修恢復為出廠時的鞋底圖樣。包裝紙亦採用了與外包裝相同的圖案而非一般 Dior 鞋履所使用的白色 Dior 字樣包裝紙。防塵袋為白色（Dior 男士系列較常使用海軍藍色的防塵袋，而 Dior 女士系列則較常使用白色防塵袋），底部綴有「Birkenstock」的標誌。&lt;/p&gt;

&lt;div class=&quot;gallery-box&quot;&gt;
  &lt;div class=&quot;gallery&quot;&gt;
    &lt;img src=&quot;/images/2b5fad04-c2fe-410d-8750-556b18899ad8_004.jpg&quot; /&gt;
    &lt;img src=&quot;/images/2b5fad04-c2fe-410d-8750-556b18899ad8_005.jpg&quot; /&gt;
  &lt;/div&gt;
  &lt;em&gt;與外包裝相同的圖案的包裝紙以及白色防塵袋。&lt;/em&gt;
&lt;/div&gt;

&lt;p&gt;包裝包含一張使用相同主題的浮雕印刷卡片，以法文以及英文介紹本次的聯名系列。聯名版本的勃肯鞋於磨砂小牛皮後踝帶內側壓印了尺寸以及「Limited Edition」（限定版）字樣。通常版本的勃肯鞋履尺寸號碼一般位於人體工學鞋底面上。Tokio 款式於鞋頭部分多了橡膠加固，使得它比起一般勃肯鞋更加防水、耐用。Dior 經典鋁質扣環也令聯名版本更容易穿脫，更可以減少小牛皮的損傷。&lt;/p&gt;

&lt;p&gt;有趣的是，Dior 選擇由 Birkenstock 的德國工廠生產此次的聯名系列，而非自家的義大利工坊。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2b5fad04-c2fe-410d-8750-556b18899ad8_006.jpg&quot; alt=&quot;簡介卡&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;gallery-box&quot;&gt;
  &lt;div class=&quot;gallery&quot;&gt;
    &lt;img src=&quot;/images/2b5fad04-c2fe-410d-8750-556b18899ad8_007.jpg&quot; /&gt;
    &lt;img src=&quot;/images/2b5fad04-c2fe-410d-8750-556b18899ad8_008.jpg&quot; /&gt;
  &lt;/div&gt;
  &lt;em&gt;簡介卡以及熱壓印。&lt;/em&gt;
&lt;/div&gt;

&lt;p&gt;當然，這些奢華細節勢必有相對的代價：正確來說是新台幣 35,000 元 —— 大約是任一雙勃肯鞋的十倍。&lt;/p&gt;

&lt;h2 id=&quot;惡名昭彰的適應期&quot;&gt;惡名昭彰的「適應期」&lt;/h2&gt;

&lt;p&gt;即便看起來如此優越，它仍舊有我個人難以喜愛的面向。&lt;/p&gt;

&lt;p&gt;不知基於何種原因，Dior 選擇使用 Birkenstock 惡名昭彰的經典硬式鞋底。它需要穿著者在感受到客製鞋一般的舒適之前忍受漫長且疼痛的適應期。這幾年 Birkenstock 已經針對旗下的涼鞋預設提供軟底的款式，因大眾已不再相信鞋履所帶來的舒適感值得承受「一分耕耘，一分收穫」式的痛苦過程。&lt;/p&gt;

&lt;p&gt;如果你打算購入此鞋款，請先做好得穿幾週超厚底襪和忍受足弓疼痛的心理準備。使用錘子輕輕敲打受壓處可能有助於減緩過渡期的不適感，但拿工具敲打定價將近四萬元的鞋履對多數人來說勢必會造成一些心理壓力。如果你想要一開始就能舒適的穿鞋，建議省點錢去購買非 Dior 聯名的軟底勃肯鞋。Christian Louboutin 曾表示：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;鞋履轉化人的肢體語言和態度。它們在生理與心靈層面提升一個人。&lt;/p&gt;

  &lt;p&gt;&lt;cite&gt;Christian Louboutin&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;我完全同意大師的說法⋯⋯除了這次以外。&lt;/p&gt;
</description>
                <pubDate>Sat, 18 Jun 2022 19:46:59 +0800</pubDate>
                <link>https://one.vg/tw/blog/dior-by-birkenstock-tokio-mules-review</link>
                <guid isPermaLink="true">https://one.vg/tw/blog/dior-by-birkenstock-tokio-mules-review</guid>
                
                <category>Fashion</category>
                
                <category>Dior</category>
                
                
                <category>tw</category>
                
            </item>
        
            <item>
                <title>Dior by Birkenstock: Tokio Mules Review</title>
                <description>&lt;blockquote&gt;
  &lt;p&gt;You can never take too much care over the choice of your shoes. Too many women think that they are unimportant, but the real proof of an elegant woman is what is on her feet.&lt;/p&gt;

  &lt;p&gt;&lt;cite&gt;Christian Dior&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Dior’s Birkenstock &lt;a href=&quot;https://www.birkenstock.com/us/1774/dior/&quot;&gt;collaboration&lt;/a&gt; is now available, featuring two of Birkenstock’s signature styles: the Tokio Mule and Milano Sandal. It was first revealed during Paris Fashion Week back in January as part of Dior Men’s fall/winter collection.&lt;/p&gt;

&lt;p&gt;The retail version features three different color options in nubuck calfskin for both Tokio and Milano: gray (this option also features a felted wool upper body instead of nubuck calfskin one), black and greige (tho on the box it said beige). There’s also a rare variant of grey Tokio Mules with pattens represent the 1957 Dior haute couture collection.&lt;/p&gt;

&lt;p&gt;
  &lt;video muted=&quot;&quot; loop=&quot;&quot; preload=&quot;auto&quot; controls=&quot;&quot; type=&quot;video/mp4&quot; width=&quot;100%&quot; poster=&quot;/images/2b5fad04-c2fe-410d-8750-556b18899ad8_001.jpg&quot;&gt;
    &lt;source src=&quot;/images/2b5fad04-c2fe-410d-8750-556b18899ad8_001.mp4&quot; /&gt;
  &lt;/video&gt;
  &lt;em&gt;Dior by Birkenstock collections.&lt;/em&gt;
&lt;/p&gt;

&lt;p&gt;I end up picked up a pair of Tokio as it’s my favorite style, and in beige as it works best with most of my outfits.&lt;/p&gt;

&lt;h2 id=&quot;packaging-and-details&quot;&gt;Packaging and Details&lt;/h2&gt;

&lt;p&gt;Like the Louis Vuitton and Nike “Air Force 1” and the “Air Dior”, the Dior by Birkenstock collaboration also features a special packaging with Dior Oblique and Bones gradient motif that matches its EVA outsole:&lt;/p&gt;

&lt;div class=&quot;gallery-box&quot;&gt;
  &lt;div class=&quot;gallery&quot;&gt;
    &lt;img src=&quot;/images/2b5fad04-c2fe-410d-8750-556b18899ad8_002.jpg&quot; /&gt;
    &lt;img src=&quot;/images/2b5fad04-c2fe-410d-8750-556b18899ad8_003.jpg&quot; /&gt;
  &lt;/div&gt;
  &lt;em&gt;Dior Oblique and Birkenstock Bones gradient motif.&lt;/em&gt;
&lt;/div&gt;

&lt;p&gt;Although it looks nice and feel more premium than any ordinary birks, I doubt the outsole can be restored to its original oblique pattern once wear out, neither by Dior or Birkenstock. The wrapping paper were also in such pattern unlike other Dior shoes. The dust bags were in white (Dior Men tend to use navy blue dust bags, while Dior Women tend to have white dust bags), with “Birkenstock” logo at the bottom.&lt;/p&gt;

&lt;div class=&quot;gallery-box&quot;&gt;
  &lt;div class=&quot;gallery&quot;&gt;
    &lt;img src=&quot;/images/2b5fad04-c2fe-410d-8750-556b18899ad8_004.jpg&quot; /&gt;
    &lt;img src=&quot;/images/2b5fad04-c2fe-410d-8750-556b18899ad8_005.jpg&quot; /&gt;
  &lt;/div&gt;
  &lt;em&gt;The oblique wrapping paper and dust bags.&lt;/em&gt;
&lt;/div&gt;

&lt;p&gt;There’s a small card which embossed pattern just like the outer box, as an introduction to the Dior and Birkenstock collaboration. The birks were hot stamped with size number and “limited edition” label in silver on the back strap. Ordinary birks usually have their size numbers on the footbed. The toe section of the Tokio were reinforced with rubber, make then more water resistance and durable than usual birks. The Dior signature aluminum buckle make it easier to open while also prevent bending of the calfskin.&lt;/p&gt;

&lt;p&gt;Interestingly, Dior has Birkenstock manufactures these birks in Germany instead of making them in-house in Italy.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2b5fad04-c2fe-410d-8750-556b18899ad8_006.jpg&quot; alt=&quot;The Introduction&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;gallery-box&quot;&gt;
  &lt;div class=&quot;gallery&quot;&gt;
    &lt;img src=&quot;/images/2b5fad04-c2fe-410d-8750-556b18899ad8_007.jpg&quot; /&gt;
    &lt;img src=&quot;/images/2b5fad04-c2fe-410d-8750-556b18899ad8_008.jpg&quot; /&gt;
  &lt;/div&gt;
  &lt;em&gt;Introduction card and hot stamping.&lt;/em&gt;
&lt;/div&gt;

&lt;p&gt;And of course, all those premium touches came with a price: €960 to be exact - that’s about ten fold of any off-the-shelf birks.&lt;/p&gt;

&lt;h2 id=&quot;the-infamous-break-in-process&quot;&gt;The Infamous “Break-In” Process&lt;/h2&gt;

&lt;p&gt;As superior as it seems, there’s actually something I personally didn’t like.&lt;/p&gt;

&lt;p&gt;For some reason, Dior chose Birkenstock’s infamous classic footbed, which requires the wearer to endure the painful break-in process before it can be comfortable. Birkenstock these days offers soft footbed by default for most of their sandals, as the majority no longer believes the pain is actually worth the outcome.&lt;/p&gt;

&lt;p&gt;Prepare to wear some extra thick socks and bearing the foot arch pain for a few weeks if you are getting a pair of these. Some hammer work might help with the process, but hammering a €1k shoes would definitely give most people some pressure. But if you want something comfy from the start, save yourself a few bucks and get a non-Dior birks instead. As Christian Louboutin once said,&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Shoes transform your body language and attitude. They lift you physically and emotionally.&lt;/p&gt;

  &lt;p&gt;&lt;cite&gt;Christian Louboutin&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Well, I can’t agree more with him…just not this time.&lt;/p&gt;
</description>
                <pubDate>Sat, 18 Jun 2022 19:46:59 +0800</pubDate>
                <link>https://one.vg/blog/dior-by-birkenstock-tokio-mules-review</link>
                <guid isPermaLink="true">https://one.vg/blog/dior-by-birkenstock-tokio-mules-review</guid>
                
                <category>Fashion</category>
                
                <category>Dior</category>
                
                
            </item>
        
    </channel>
</rss>